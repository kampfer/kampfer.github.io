!function(e){function t(t){for(var r,o,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(u&&u(t);h.length;)h.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={0:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;i.push([43,1]),n()}([,,,,,,,,,,,,,,function(e,t){e.exports="data:image/png;base64,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"},,,,,,,function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(11),o=n.n(i),s=n(8),l=n.n(s),c=n(2),u=n.n(c),d=n(3),h=n.n(d),f=n(4),m=n.n(f),p=n(5),v=n.n(p),y=n(7),g=n.n(y),E=n(6),C=n.n(E),w=(n(21),function(e){function t(){return u()(this,t),m()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t="grid-container";return e.vertical&&(t+=" vertical"),a.a.createElement("div",{className:t},e.children)}}]),t}(a.a.Component)),A=function(e){function t(e){return u()(this,t),m()(this,v()(t).call(this,e))}return C()(t,e),h()(t,[{key:"render",value:function(){var e,t=this.props,n=t.width,r=t.height,i={flexGrow:t.flexGrow};return void 0!==n&&void 0!==r&&console.warn("Grid.render: 不允许同时设置width和height"),void 0!==n&&(e=n),void 0!==r&&(e=r),i.flexBasis=e,a.a.createElement("div",{className:"grid",style:i},t.children)}}]),t}(a.a.Component),_=n(10),k=n.n(_);var P=function(e){return e.arrayBuffer()},b={gltf:function(e){return e.json()},glb:P,bin:P},T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.baseUrl,r=t.urlModifier;u()(this,e),this.baseUrl=n,this.urlModifier=r,this._requstingPool={}}return h()(e,[{key:"extname",value:function(e){return k.a.extname(e).slice(1)}},{key:"formatResponse",value:function(e,t){var n=this.extname(t);return b[n](e)}},{key:"load",value:function(e){var t=this;if(e in this._requstingPool)return this._requstingPool[e];!function(e){return/^https?:\/\//.test(e)||"/"===e.charAt(0)}(e)&&this.baseUrl&&(e="".concat(this.baseUrl,"/").concat(e));var n=e;this.urlModifier&&(n=this.urlModifier.call(this,e)),console.log("request: ".concat(e,"(").concat(n,")"));var r=fetch(n).then((function(n){if(n.ok)return t.formatResponse(n,e);throw"Network response was not ok."}));return this._requstingPool[e]=r,r}}]),e}(),N=n(9),M=n.n(N),R=n(1);function S(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}var O=1313821514,U=5130562,F="KHR_binary_glTF";function K(e){this.name=F,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:S(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},"glTF"!==this.header.magic)throw new Error("GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("GLTFLoader: Legacy binary file detected.");for(var n=new DataView(e,12),r=0;r<n.byteLength;){var a=n.getUint32(r,!0);r+=4;var i=n.getUint32(r,!0);if(r+=4,i===O){var o=new Uint8Array(e,12+r,a);this.content=S(o)}else if(i===U){var s=12+r;this.body=e.slice(s,s+a)}r+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}var L,Y,V=function(e){function t(e){var n;u()(this,t);var r=[],a=[],i=new R.Color(16711680),o=new R.Color(43775),s={};function l(e,t,n){c(e,n),c(t,n)}function c(e,t){r.push(0,0,0),a.push(t.r,t.b,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}l("p","n1",i),l("p","n2",i),l("p","n3",i),l("p","n4",i),l("n1","n2",i),l("n2","n3",i),l("n3","n4",i),l("n4","n1",i),l("u1","u2",o),l("u2","u3",o),l("u3","u1",o);var d=new R.Geometry,h=new R.LineBasicMaterial({vertexColors:!0});return d.setAttribute("position",new R.BufferAttribute(new Float32Array(r),3)),d.setAttribute("color",new R.BufferAttribute(new Float32Array(a),3)),(n=m()(this,v()(t).call(this,d,h))).position.copy(e.position),n.quaternion.copy(e.quaternion),n.scale.copy(e.scale),n.camera=e,n.name=e.name,n.isCameraHelper=!0,n._pointMap=s,n.update(new R.Vec3(1,1,1)),n}return C()(t,e),h()(t,[{key:"update",value:function(e){var t=this.geometry.getAttribute("position"),n=this._pointMap,r=function(r,a,i,o){var s=n[r];if(s)for(var l=0,c=s.length;l<c;l++)t.setXYZ(s[l],a*e.x,i*e.y,o*e.z)};r("p",0,0,0),r("n1",1,1,-1),r("n2",-1,1,-1),r("n3",-1,-1,-1),r("n4",1,-1,-1),r("u1",.7,1.1,-1),r("u2",0,2,-1),r("u3",-.7,1.1,-1)}}]),t}(R.LineSegments),D=R.constants.LINEAR_INTERPOLATION,B=R.constants.STEP_INTERPOLATION,x=R.constants.CUBIC_SPLINE_INTERPOLATION,I=R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA,G=R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA,j={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",JOINTS_0:"skinIndex",WEIGHTS_0:"skinWeight"},z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},H={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},W={translation:R.VectorKeyFrameTrack,rotation:R.QuaternionKeyFrameTrack,scale:R.VectorKeyFrameTrack,weights:R.NumberKeyFrameTrack},q={translation:"position",rotation:"quaternion",scale:"scale",weights:"morphTargetInfluences"},J={LINEAR:D,STEP:B,CUBICSPLINE:x},X="GLB",Q="GLTF",Z=function(){function e(t){u()(this,e),this._loader=t.loader,this._cache=null}return h()(e,[{key:"reset",value:function(e,t){this._cache={},this._data=e,this._type=t}},{key:"_parse",value:function(e,t){var n=e+":"+t,r=this._cache[n];if(!r){switch(e){case"scene":r=this.parseScene(t);break;case"node":r=this.parseNode(t);break;case"mesh":r=this.parseMesh(t);break;case"material":r=this.parseMaterial(t);break;case"accessor":r=this.parseAccessor(t);break;case"bufferView":r=this.parseBufferView(t);break;case"buffer":r=this.parseBuffer(t);break;case"camera":r=this.parseCamera(t);break;case"animation":r=this.parseAnimation(t);break;default:console.warn("GLTFParser：不支持的属性类型："+e)}this._cache[n]=r}return r}},{key:"parse",value:function(e){return e instanceof ArrayBuffer?this.parseArrayBuffer(e):this.parseJson(e)}},{key:"parseArrayBuffer",value:function(e){var t=new K(e),n=t.content;return e=JSON.parse(n),console.log("glTF Data:",e),this._binaryReader=t,this.reset(e,X),Promise.all([this.parseScenes(),this.parseAnimations(),this.parseCameras()]).then((function(t){var n=M()(t,3),r=n[0],a=n[1],i=n[2];return{asset:e.asset,scenes:r,scene:e.scene,cameras:i,animations:a}}))}},{key:"parseJson",value:function(e){return console.log("glTF Data:",e),this.reset(e,Q),Promise.all([this.parseScenes(),this.parseAnimations(),this.parseCameras()]).then((function(t){var n=M()(t,3),r=n[0],a=n[1],i=n[2];return{asset:e.asset,scenes:r,scene:e.scene,cameras:i,animations:a}}))}},{key:"parseScenes",value:function(){var e=this,t=this._data;return Promise.all(t.scenes.map((function(t,n){return e._parse("scene",n)})))}},{key:"parseAnimations",value:function(){var e=this,t=this._data.animations||[];return Promise.all(t.map((function(t,n){return e._parse("animation",n)})))}},{key:"parseCameras",value:function(){var e=this,t=this._data.cameras||[];return Promise.all(t.map((function(t,n){return e._parse("camera",n)})))}},{key:"parseAnimation",value:function(e){for(var t=this._data.animations[e],n=t.channels,r=t.samplers,a=[],i=[],o=[],s=[],l=[],c=0,u=n.length;c<u;c++){var d=n[c],h=r[d.sampler],f=d.target,m=f.node,p=h.input,v=h.output;a.push(this._parse("node",m)),i.push(this._parse("accessor",p)),o.push(this._parse("accessor",v)),s.push(h),l.push(f)}return Promise.all([Promise.all(a),Promise.all(i),Promise.all(o),Promise.all(s),Promise.all(l)]).then((function(n){for(var r=M()(n,5),a=r[0],i=r[1],o=r[2],s=r[3],l=r[4],c=[],u=0,d=a.length;u<d;u++){var h=a[u],f=i[u],m=o[u],p=s[u],v=l[u],y=W[v.path];if(m.normalized){var g=m.array,E=void 0;g.constructor===Int8Array?E=1/127:g.constructor===Uint8Array?E=1/255:g.constructor===Int16Array?E=1/32767:g.constructor===Uint16Array?E=1/65535:console.warn("GLTFParser：不支持的typearray类型");for(var C=new Float32Array(g.length),w=0,A=g.length;w<A;w++)C[w]=g[w]*E;g=C}var _=new y(h,q[v.path],f.array,m.array,J[p.interpolation]);c.push(_)}var k=void 0!==t.name?t.name:"animation_"+e;return new R.AnimationClip(k,void 0,c)}))}},{key:"parseScene",value:function(e){var t=this,n=this._data.scenes[e].nodes;return Promise.all(n.map((function(e){return t._parse("node",e)}))).then((function(e){var t=new R.Scene;return e.forEach((function(e){t.add(e)})),t}))}},{key:"parseNode",value:function(e){var t=this,n=this._data.nodes[e],r=[];return void 0!==n.mesh&&r.push(this._parse("mesh",n.mesh)),void 0!==n.camera&&r.push(this._parse("camera",n.camera)),Promise.all(r).then((function(t){var r;if(0===t.length?(r=new R.Group).name=n.name||"group_".concat(e):1===t.length?r=(r=t[0]).type===I||r.type===G?new V(r):r.clone():t.length>1&&(r=new R.GraphObject,t.forEach((function(e){e.type===I||e.type===G||(e=e[0].clone()),r.add(e)})),r.name=n.name||"mesh&camera_".concat(e)),n.matrix){var a=new R.Mat4(n.matrix);r.applyMatrix(a)}else n.translation&&r.position.setFromArray(n.translation),n.rotation&&r.quaternion.setFromArray(n.rotation),n.scale&&r.scale.setFromArray(n.scale);return r})).then((function(e){return void 0!==n.children?Promise.all(n.children.map((function(e){return t._parse("node",e)}))).then((function(t){return t.forEach((function(t){e.add(t)})),e})):e}))}},{key:"parseMesh",value:function(e){var t=this,n=this._data.meshes[e],r=n.primitives;return Promise.all(r.map((function(e){return t.parsePrimitive(e)}))).then((function(t){var r,a=n.name?n.name:"mesh_".concat(e);return 0===t.length?r=new R.GraphObject:1===t.length?r=t[0]:(r=new R.Group,t.forEach((function(e,t){e.name="".concat(a,"_primitive_").concat(t),r.add(e)}))),r.name=a,r}))}},{key:"parseCamera",value:function(e){var t,n=this._data.cameras[e];if("perspective"===n.type){var r=n.perspective,a=r.yfov,i=r.aspectRatio,o=r.zfar,s=r.znear;t=new R.PerspectiveCamera(a,i,s,o)}else{if("orthographic"!==n.type)throw"不支持的camera类型";var l=n.orthographic,c=l.xmag,u=l.ymag,d=l.zfar,h=l.znear;t=new R.OrthographicCamera(-c/2,c/2,u/2,-u/2,d,h)}return t.name=n.name||"".concat(n.type,"Camera.").concat(e),t}},{key:"parsePrimitive",value:function(e){var t=this,n=(this._data,e.attributes),r=[],a=new R.Geometry,i=function(e){var i=j[e],o=n[e];r.push(t._parse("accessor",o).then((function(e){a.setAttribute(i,e)})))};for(var o in n)i(o);return void 0!==e.indices&&r.push(this._parse("accessor",e.indices).then((function(e){a.setIndex(e)}))),Promise.all(r).then((function(){return t._parse("material",e.material)})).then((function(t){var n=new R.Mesh(a,t);return n.drawMode=void 0===e.mode?4:e.mode,n}))}},{key:"parseMaterial",value:function(e){var t=this._data,n=new R.Material;if(t.materials&&t.materials[e]){var r=t.materials[e];n.color=new R.Color(r.pbrMetallicRoughness.baseColorFactor||[1,1,1]),n.metallicFactor=r.pbrMetallicRoughness.metallicFactor||1,n.roughnessFactor=r.pbrMetallicRoughness.roughnessFactor||1}else n.color=new R.Color([0,0,0,1]);return n}},{key:"parseAccessor",value:function(e){var t=this._data,n=t.accessors[e],r=[];return void 0===n.bufferView&&void 0===n.sparse?Promise.resolve(null):(void 0!==n.bufferView?r.push(this._parse("bufferView",n.bufferView)):r.push(null),void 0!==n.sparse&&(r.push(this._parse("bufferView",n.sparse.indices.bufferView)),r.push(this._parse("bufferView",n.sparse.values.bufferView))),Promise.all(r).then((function(e){var r,a,i=e[0],o=z[n.componentType],s=H[n.type],l=s*o.BYTES_PER_ELEMENT,c=n.byteOffset,u=t.bufferViews[n.bufferView],d=u.byteStride,h=!0===n.normalized;if(void 0!==d&&d!==l?(a=new o(i,0,n.count*d/o.BYTES_PER_ELEMENT),r=new R.BufferAttribute(a,s,h,d,c,u.target)):(a=null===i?new o(n.count*s):new o(i,c,s*n.count),r=new R.BufferAttribute(a,s,h,0,0,u.target)),void 0!==n.sparse)for(var f=H.SCALAR,m=z[n.sparse.indices.componentType],p=s,v=o,y=n.sparse.indices.byteOffset,g=n.sparse.values.byteOffset,E=new m(e[1],y,n.sparse.count*f),C=new v(e[2],g,n.sparse.count*p),w=0,A=E.length;w<A;w++){var _=E[w];r.array[_*p]=C[w*p],p>=2&&(r.array[_*p+1]=C[w*p+1]),p>=3&&(r.array[_*p+2]=C[w*p+2]),p>=4&&(r.array[_*p+3]=C[w*p+3])}return r})))}},{key:"parseBufferView",value:function(e){var t=this._data.bufferViews[e];return this._parse("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0,a=r,i=r+n;return e.slice(a,i)}))}},{key:"parseBuffer",value:function(e){var t=this._data.buffers[e],n=/^data:(.*?)(;base64)?,(.*)/.exec(t.uri);if(n){var r=n[3],a=!!n[2];n[1];r=decodeURIComponent(r),a&&(r=atob(r));for(var i=new Uint8Array(r.length),o=0,s=r.length;o<s;o++)i[o]=r.charCodeAt(o);return Promise.resolve(i.buffer)}return t.uri?this._loader.load(t.uri):this._type===X?Promise.resolve(this._binaryReader.body):void 0}}]),e}(),$=(n(26),function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).fileInputRef=a.a.createRef(),n}return C()(t,e),h()(t,[{key:"loadGltfFromFiles",value:function(e){if(e&&e.length>0){for(var t,n={},r=0,a=e.length;r<a;r++){var i=e[r],o=k.a.extname(i.name).slice(1);n[i.name]=i,"gltf"!==o&&"glb"!==o||(t=i)}if(!t){var s="请上传.gltf或.glb文件！";return alert(s),Promise.reject(s)}var l=[],c=new T({urlModifier:function(e){if(e in n){var t=URL.createObjectURL(n[e]);return l.push(t),t}return e}}),u=new Z({loader:c}),d=c.load(t.name).then((function(e){return u.parse(e)}));return l.forEach((function(e){URL.revokeObjectURL(e)})),d}}},{key:"loadGltfFromUrl",value:function(e){var t=k.a.extname(e).toLowerCase();if(".gltf"!==t&&".glb"!==t)return Promise.reject("文件格式不正确");var n=new T({baseUrl:k.a.dirname(e)}),r=new Z({loader:n});return n.load(k.a.basename(e)).then((function(e){return r.parse(e)}))}},{key:"open",value:function(){var e=this,t=this.fileInputRef.current;return t?(t.click(),new Promise((function(t,n){e.onceFileInputChange((function(e){e.files.length>0?t(e.files):n("取消")})),setTimeout((function(){n("操作超时！")}),3e4)})).then((function(t){return e.loadGltfFromFiles(t)}))):Promise.reject("File Input 未完成加载！")}},{key:"openUrl",value:function(){var e=prompt("请输入gltf或glb文件地址");return e?this.loadGltfFromUrl(e):Promise.reject("输入已取消")}},{key:"onceFileInputChange",value:function(e){var t=this.fileInputRef.current;t&&t.addEventListener("change",(function n(){t.removeEventListener("change",n),e(t)}),!1)}},{key:"componentDidMount",value:function(){var e=location.search.match(/gltf=([^&]*)/),t=this.props.onSuccess;e&&t&&this.loadGltfFromUrl(e[1]).then(t)}},{key:"render",value:function(){return a.a.createElement("input",{type:"file",name:"gltfFile",style:{display:"none"},ref:this.fileInputRef,multiple:!0})}}]),t}(a.a.Component)),ee=(n(27),function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).state={gltf:e.gltf},n.webglCanvas=a.a.createRef(),n.webglRenderer=null,n._activeCameraType=null,n._mixer=null,n._cameras=null,n._controllers=null,n._clock=null,n}return C()(t,e),h()(t,[{key:"getSceneBox",value:function(){var e=this.props.gltf,t=e.scenes[e.scene];return(new R.Box3).setFromObject(t)}},{key:"setActiveCameraType",value:function(e){this._activeCameraType=e}},{key:"setViewType",value:function(e){var t=this.props.gltf;t.scenes[t.scene].traverse((function(t){t.material&&("mesh"===e?t.material.wireframe=!1:"wireframe"===e&&(t.material.wireframe=!0))}))}},{key:"stopRender",value:function(){if(cancelAnimationFrame(this._animationTimer),this._cameras=null,this._controllers)for(var e in this._controllers)this._controllers[e].destroy();this._mixer&&this._mixer.destroy()}},{key:"pause",value:function(){this._clock.stop()}},{key:"resume",value:function(){this._clock.start()}},{key:"renderGltf",value:function(e,t){var n,r=this;console.log("gltf:",e),this.stopRender();var a=this.props,i=e.scenes[e.scene],o=this.webglRenderer;this.setViewType(a.viewType);var s=this.getSceneBox(),c=s.getSize(),u=c.length(),d=s.getCenter(),h=this.webglCanvas.current,f=h.width,m=h.height,p=c.z/10,v=10*c.z,y=R.mathUtils.degToRad(90),g=f/m,E=Math.tan(y/2)*u,C=E*g;for(var w in console.log("Scene Size:",c),console.log("length:",u),console.log("Scene center:",d),this._cameras=(n={},l()(n,R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA,new R.PerspectiveCamera(y,g,p,v)),l()(n,R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA,new R.OrthographicCamera(-C,C,E,-E,p,v)),n),this._cameras){var A=this._cameras[w];A.position.copy(d),A.position.z+=u,A.lookAt(d),A.updateWorldMatrix()}for(var _ in this._controllers={},this._cameras){var k=this._cameras[_],P=new R.OrbitController(k,o.domElement);P.target=d.clone();var b=p,T=v-u;k.type===R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA?(P.minDistance=b,P.maxDistance=T):k.type===R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA&&(P.maxZoom=u/(Math.tan(y/2)*b),P.minZoom=u/(Math.tan(y/2)*T)),this._controllers[k.type]=P}this._mixer=new R.AnimationMixer(e.animations),this._clock=new R.Clock,i.traverse((function(e){if(!0===e.isCameraHelper){var t=(new R.Box3).setFromObject(e).getSize(),n=new R.Vec3(.2,.2,.2);n.multiply(c).divide(t),e.update(n)}}));var N=new R.Scene,M=u/10,S=new R.GridHelper(100*M,100);console.log("gridWidth = ".concat(M)),N.add(S),this.setActiveCameraType(t);!function e(){r._animationTimer=requestAnimationFrame(e),a.beforeRender&&a.beforeRender(),r.webglRenderer.clear(),r._mixer.update(r._clock.getDeltaTime());var t=r._cameras[r._activeCameraType];r.webglRenderer.render(N,t),r.webglRenderer.render(i,t),a.afterRender&&a.afterRender()}()}},{key:"startRenderLater",value:function(){var e=this;clearTimeout(this._startRenderTimer),this._startRenderTimer=setTimeout((function(){var t=e.props,n=t.gltf;n&&(e.stopRender(),e.webglRenderer.setViewport(0,0,t.width,t.height),e.renderGltf(n,t.activeCameraType))}),100)}},{key:"componentDidMount",value:function(){var e=this.webglCanvas.current;this.webglRenderer=new R.WebGLRenderer({canvas:e,autoClearColor:!1});var t=window.getComputedStyle(e).backgroundColor;this.webglRenderer.setClearColor(new R.Color(t)),this.startRenderLater()}},{key:"componentWillUnmount",value:function(){this.stopRender(),this.webglRenderer.destroy()}},{key:"componentDidUpdate",value:function(e){var t=this.props;e.gltf!==t.gltf?this.startRenderLater():e.width===t.width&&e.height===t.height||this.webglRenderer.setViewport(0,0,t.width,t.height)}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height;return a.a.createElement("canvas",{ref:this.webglCanvas,width:t,height:n,className:"gltf-renderer"})}}]),t}(a.a.Component)),te=(n(28),n(29),function(e){function t(){return u()(this,t),m()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t="panel ".concat(e.className);return a.a.createElement("div",{className:t},a.a.createElement("div",{className:"head"},a.a.createElement("div",{className:"name"},e.title),a.a.createElement("div",{className:"tools"})),a.a.createElement("div",{className:"body",style:e.height?{height:e.height-30}:null},e.children))}}]),t}(a.a.Component)),ne=R.constants.OBJECT_TYPE_MESH,re=R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA,ae=R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA,ie=(L={default:"empty-object"},l()(L,ne,"mesh"),l()(L,re,"camera"),l()(L,ae,"camera"),L),oe=function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).state={expanded:!1,visible:e.node.visible},n.handleExpandAndCollapse=n.handleExpandAndCollapse.bind(g()(n)),n.handleSelect=n.handleSelect.bind(g()(n)),n.toggleVisibility=n.toggleVisibility.bind(g()(n)),n}return C()(t,e),h()(t,[{key:"getNodeName",value:function(e){var t=e.name;return t||(t=e.constructor.name+"."+e.uid),t}},{key:"handleExpandAndCollapse",value:function(e){e.preventDefault(),e.stopPropagation();var t=!this.state.expanded;this.setState({expanded:t})}},{key:"handleSelect",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onSelectNode&&this.props.onSelectNode(this.props.node.uid)}},{key:"createIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie.default,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return a.a.createElement("i",{className:"icon ".concat(e),key:t,onClick:n},e)}},{key:"toggleVisibility",value:function(e){e.preventDefault(),e.stopPropagation();var t=!this.state.visible;this.props.node.visible=t,this.setState({visible:t})}},{key:"render",value:function(){var e,n=this.props,r=this.state,i=n.node,o=n.level,s=this.getNodeName(i),l=r.expanded,c=r.visible,u="node",d=[],h=[];n.selectedNode===i.uid&&(u+=" selected"),i.children.length>0&&(u+=l?" expanded":" collapsed",h.push(this.createIcon(l?"collapse":"expand",h.length,this.handleExpandAndCollapse)),e=a.a.createElement("div",{className:"node-children"},i.children.map((function(e){return a.a.createElement(t,{node:e,level:o+1,key:e.uid,onSelectNode:n.onSelectNode,selectedNode:n.selectedNode})})))),h.push(this.createIcon(ie[i.type],h.length));for(var f=0;f<o;f++)d.push(a.a.createElement("div",{className:"indent-guide",key:2*f}),a.a.createElement("div",{className:"indent-guide",key:2*f+1}));return a.a.createElement("div",{className:u},a.a.createElement("div",{className:"node-label",onClick:this.handleSelect},a.a.createElement("div",{className:"indent"},d),h,a.a.createElement("div",{className:"node-name"},s),a.a.createElement("i",{className:"icon ".concat(c?"visible":"hidden"),onClick:this.toggleVisibility})),e)}}]),t}(a.a.Component),se=function(e){function t(e){return u()(this,t),m()(this,v()(t).call(this,e))}return C()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.gltf,n=t&&t.scenes[t.scene].children;return a.a.createElement(te,{className:"gltf-node-viewer",title:"节点大纲",height:e.height},a.a.createElement("div",{className:"node-list-wrapper"},a.a.createElement("div",{className:"node-list"},n&&n.map((function(t){return a.a.createElement(oe,{node:t,level:0,key:t.uid,onSelectNode:e.onSelectNode,selectedNode:e.selectedNode})})))))}}]),t}(a.a.Component),le=(n(30),function(e){function t(){return u()(this,t),m()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"formatValue",value:function(e){var t=e%1,n=Math.abs(e-t),r=0;return 0!==t&&(r=5-n.toString().length),r<0&&(r=0),e.toFixed(r)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.unit;return a.a.createElement("div",{className:"slide-input"},a.a.createElement("span",{className:"value"},this.formatValue(t)),a.a.createElement("span",{className:"unit"},n))}}]),t}(a.a.Component)),ce=(n(31),{position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:0,y:0,z:0}}),ue={position:"m",rotation:"°",scale:"",Fovy:"°",Aspect:"",Near:"m",Far:"m"},de={rotation:R.mathUtils.radToDeg,Fovy:R.mathUtils.radToDeg},he=function(e){function t(){return u()(this,t),m()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"formatValue",value:function(e,t){var n=de[t];return n?n(e):e}},{key:"render",value:function(){var e=this,t=this.props,n=t.gltf,r=t.selectedNode,i=ce;if(n&&r){var o=n.scenes[n.scene];i=o.getChildByUid(r)}return a.a.createElement(te,{className:"gltf-node-property-viewer",title:"物体属性",height:t.height},i.isCameraHelper&&a.a.createElement("div",{className:"input-group"},["Fovy","Aspect","Near","Far"].map((function(t){return a.a.createElement("div",{className:"input-wrapper",key:t},a.a.createElement("label",{className:"input-name"},t),a.a.createElement(le,{value:e.formatValue(i.camera[t.toLowerCase()],t),unit:ue[t]}))}))),["Position","Rotation","Scale"].map((function(t){var n=t.toLowerCase(),r=i[n];return a.a.createElement("div",{className:"input-group",key:t},["x","y","z"].map((function(i,o){return a.a.createElement("div",{className:"input-wrapper",key:i},a.a.createElement("label",{className:"input-name"},(0===o?t:"")+" "+i.toUpperCase()),a.a.createElement(le,{value:e.formatValue(r[i],n),unit:ue[n]}))})))})))}}]),t}(a.a.Component),fe=n(13),me=n.n(fe),pe=window.performance&&window.performance.memory,ve=function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).state={path:"",data:[],max:-1/0,min:1/0,cur:0},n.textPadding=[2,0,0,3],n.diagramPadding=[0,3,3,3],n.textOffset={left:n.textPadding[3],top:n.textPadding[0],width:e.width-n.textPadding[1]-n.textPadding[3],height:e.height/3-n.textPadding[0]-n.textPadding[2]},n.diagramOffset={left:n.diagramPadding[3],top:e.height/3+n.diagramPadding[0],width:e.width-n.diagramPadding[1]-n.diagramPadding[3],height:2*e.height/3-n.diagramPadding[0]-n.diagramPadding[2]},n}return C()(t,e),h()(t,[{key:"update",value:function(e){var t=this.state.max,n=this.state.min;e>t?t=e:e<n&&(n=e);var r=this.state.data,a=[].concat(me()(r),[e]),i=this.diagramOffset,o=i.width;a.length>o&&a.shift();for(var s="",l=i.top+i.height,c=i.left+i.width,u=o-a.length,d=a.length-1;d>=0;d--){var h=a[d],f=d+u,m=i.left+f,p=l-(h-0)/(t-0)*i.height;d===a.length-1?s+="M ".concat(m," ").concat(p):s+="L ".concat(m," ").concat(p)}s+="V ".concat(l," H ").concat(c," Z"),this.setState({cur:e,data:a,path:s,max:t,min:n})}},{key:"render",value:function(){var e=this.props,t=this.state,n=this.textOffset,r={display:e.hide?"none":"",backgroundColor:e.backgroundColor},i={fill:e.fontColor,fontSize:9,fontFamily:"Helvetica,Arial,sans-serif",fontWeight:"bold",dominantBaseline:"hanging"},o=n.left,s=n.top,l={fill:e.fontColor},c=t.min===1/0?"?":Math.round(t.min),u=t.max===-1/0?"?":Math.round(t.max);return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.width,height:e.height,style:r},a.a.createElement("text",{x:o,y:s,style:i},Math.round(t.cur)," (",e.name,") ",c,"-",u),a.a.createElement("path",{d:t.path,style:l}))}}]),t}(a.a.Component),ye=0,ge=0,Ee=function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).state={currentPanel:0},n.handleClick=n.handleClick.bind(g()(n)),n.panels=[{name:"FPS",ref:a.a.createRef(),backgroundColor:"#002",fontColor:"#0ff"},{name:"MS",ref:a.a.createRef(),backgroundColor:"#020",fontColor:"#0f0"}],pe&&n.panels.push({name:"MB",ref:a.a.createRef(),backgroundColor:"#201",fontColor:"#f08"}),n}return C()(t,e),h()(t,[{key:"now",value:function(){return(performance||Date).now()}},{key:"handleClick",value:function(){var e=this.state.currentPanel;this.selectPanel(++e%this.panels.length)}},{key:"begin",value:function(){Y=this.now()}},{key:"end",value:function(){var e,t=this.getPannelByName("MS").ref.current,n=this.getPannelByName("FPS").ref.current;pe&&(e=this.getPannelByName("MB").ref.current);var r=this.now();if(t.update(r-Y),ge++,r-ye>=1e3&&(n.update(1e3*ge/(r-ye)),ye=r,ge=0,pe)){var a=performance.memory,i=a.usedJSHeapSize/1048576;a.jsHeapSizeLimit;e.update(i)}}},{key:"selectPanel",value:function(e){this.setState({currentPanel:e})}},{key:"getPannelByName",value:function(e){for(var t=0,n=this.panels.length;t<n;t++){var r=this.panels[t];if(r.name===e)return r}}},{key:"render",value:function(){var e=this,t=this.props,n={position:"fixed",left:t.left,top:t.top,right:t.right,bottom:t.bottom,zIndex:999};return a.a.createElement("div",{onClick:this.handleClick,style:n},this.panels.map((function(t,n){return a.a.createElement(ve,{width:"80",height:"48",key:t.name,ref:t.ref,name:t.name,backgroundColor:t.backgroundColor,fontColor:t.fontColor,hide:n!==e.state.currentPanel})})))}}]),t}(a.a.Component);n(35);function Ce(e){return a.a.createElement("div",{className:"layer",onClick:e.onClick},e.children)}n(36);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){return a.a.createElement("li",{className:"menu-item",onClick:function(t){e.onClick&&e.onClick(t,{key:e.uKey})}},a.a.createElement("span",{className:"command"+(e.checked?" checked":"")},e.checked&&a.a.createElement("i",{className:"icon tick"}),a.a.createElement("span",{className:"command-name"},e.text),a.a.createElement("span",{className:"command-short-cut"},e.secondaryText)))}function _e(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.position),n=a.a.useState(!0),r=M()(n,2),i=r[0],s=r[1];return o.a.createPortal(a.a.createElement(Ce,{onClick:function(e){e.preventDefault(),s(!i)}},a.a.createElement("ul",{className:"menu",style:t},e.items.map((function(e){if(e.itemType===ke.separator)return a.a.createElement("li",{className:"menu-separator",key:e.key});var t=e.canCheck&&e.isChecked;return a.a.createElement(Ae,{checked:t,key:e.key,uKey:e.key,onClick:e.onClick,text:e.text,secondaryText:e.secondaryText})})))),document.body)}var ke={separator:0};n(37);function Pe(e){var t=e.menuProps,n=a.a.useState(!1),r=M()(n,2),i=r[0],o=r[1],s=a.a.useState({}),l=M()(s,2),c=l[0],u=l[1],d=a.a.useRef(null);return a.a.createElement("button",{className:"button ".concat(i?"selected":""),onClick:function(n){if(t){var r=d.current.getBoundingClientRect(),a={left:r.left,top:r.top+r.height};u(a),o(!i)}e.onClick&&e.onClick(n,d.current)},ref:d},a.a.createElement("span",{className:"button-label"},e.text),t&&i&&a.a.createElement(_e,{items:t.items,position:c}))}n(38);function be(e){return a.a.createElement("ul",{className:"command-bar"},e.items.map((function(e){return a.a.createElement(Pe,{key:e.key,text:e.text,menuProps:e.subMenuProps})})))}var Te=new(function(){function e(){u()(this,e),this._commands={}}return h()(e,[{key:"getCommand",value:function(e){return this._commands[e]}},{key:"registerCommand",value:function(e,t){this._commands[e]=t}},{key:"unregisterCommand",value:function(e){delete this._commands[e]}},{key:"executeCommand",value:function(e){for(var t=this.getCommand(e),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return t&&t.apply(void 0,r)}},{key:"destory",value:function(){}}]),e}()),Ne=(n(39),n(14)),Me=n.n(Ne);function Re(e){var t=[{key:"functions",text:"操作",subMenuProps:{items:[{key:"openLocalGLTF",text:"打开Gltf/Glb文件",secondaryText:"Ctrl+O",onClick:function(){Te.executeCommand("open")},canCheck:!1},{key:"openRemoteGLTF",text:"打开远程Gltf/Glb文件",secondaryText:"Ctrl+Shift+O",onClick:function(){Te.executeCommand("openUrl")},canCheck:!1},{key:"separator_1",itemType:ke.separator},{key:"setPerspectiveCamera",text:"Perspective相机",secondaryText:"P",onClick:function(){Te.executeCommand("renderer.setActiveCameraType",R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA)},canCheck:!0,isChecked:e.activeCameraType===R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA},{key:"setOrthographicCamera",text:"Orthographic相机",secondaryText:"O",onClick:function(){Te.executeCommand("renderer.setActiveCameraType",R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA)},canCheck:!0,isChecked:e.activeCameraType===R.constants.OBJECT_TYPE_ORTHOGRAPHIC_CAMERA},{key:"separator_2",itemType:ke.separator},{key:"setMeshView",text:"Mesh视图",secondaryText:"M",onClick:function(){Te.executeCommand("renderer.setViewType","mesh")},canCheck:!0,isChecked:"mesh"===e.viewType},{key:"setWireframeView",text:"Wireframe视图",secondaryText:"W",onClick:function(){Te.executeCommand("renderer.setViewType","wireframe")},canCheck:!0,isChecked:"wireframe"===e.viewType}]}}];return a.a.createElement("div",{className:"top-bar"},a.a.createElement("img",{src:Me.a,height:"20",alt:"glTF",className:"logo"}),a.a.createElement(be,{items:t}),a.a.createElement("h1",{className:"app-title"},"GlTF2 Viewer"))}n(40);var Se=function(e){function t(){return u()(this,t),m()(this,v()(t).apply(this,arguments))}return C()(t,e),h()(t,[{key:"makeInfo",value:function(e){var t={vertices:0,faces:0,triangles:0,objects:0};e&&e.scenes[e.scene].traverse((function(e){t.objects++,e.geometry&&(t.vertices+=e.geometry._attributes.position.count)}));return t}},{key:"render",value:function(){var e=this.props.gltf,t=this.makeInfo(e);return a.a.createElement("div",{className:"status-bar"},a.a.createElement("ul",{className:"info"},a.a.createElement("li",null,a.a.createElement("span",{className:"info-key"},"Vertices:"),a.a.createElement("span",{className:"info-value"},t.vertices)),a.a.createElement("li",null,a.a.createElement("span",{className:"info-key"},"Objects:"),a.a.createElement("span",{className:"info-value"},t.objects))))}}]),t}(a.a.Component),Oe=(n(41),function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).handleMouseDown=n.handleMouseDown.bind(g()(n)),n.handleMouseUp=n.handleMouseUp.bind(g()(n)),n.handleMouseMove=n.handleMouseMove.bind(g()(n)),n}return C()(t,e),h()(t,[{key:"handleMouseDown",value:function(e){this._resizing=!0,this._resizeDirection=e.target.dataset.direction,this._lastPosition=this._getMousePosition(e)}},{key:"handleMouseUp",value:function(){this._resizing=!1}},{key:"handleMouseMove",value:function(e){if(this._resizing){var t=this._getMousePosition(e),n=t-this._lastPosition,r=this._resizeDirection,a=this.props.onResize;a&&a({deltaSize:n,direction:r}),this._lastPosition=t}}},{key:"_getMousePosition",value:function(e){return"x"===this._resizeDirection?e.clientX:"y"===this._resizeDirection?e.clientY:void 0}},{key:"componentDidMount",value:function(){window.addEventListener("mouseup",this.handleMouseUp,!1),window.addEventListener("mousemove",this.handleMouseMove,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove)}},{key:"render",value:function(){var e=this.props,t=e.resizeX,n=e.resizeY;return a.a.createElement("div",{className:"resize-helper"},e.children,t&&a.a.createElement("div",{className:"resize-helper-x","data-direction":"x",onMouseDown:this.handleMouseDown}),n&&a.a.createElement("div",{className:"resize-helper-y","data-direction":"y",onMouseDown:this.handleMouseDown}))}}]),t}(a.a.Component));var Ue={Backspace:8,Tab:9,Enter:13,Shift:16,Ctrl:17,Alt:18,PauseBreak:19,CapsLock:20,Esc:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40,Insert:45,Delete:46,KEY_0:48,KEY_1:49,KEY_2:50,KEY_3:51,KEY_4:52,KEY_5:53,KEY_6:54,KEY_7:55,KEY_8:56,KEY_9:57,KEY_A:65,KEY_B:66,KEY_C:67,KEY_D:68,KEY_E:69,KEY_F:70,KEY_G:71,KEY_H:72,KEY_I:73,KEY_J:74,KEY_K:75,KEY_L:76,KEY_M:77,KEY_N:78,KEY_O:79,KEY_P:80,KEY_Q:81,KEY_R:82,KEY_S:83,KEY_T:84,KEY_U:85,KEY_V:86,KEY_W:87,KEY_X:88,KEY_Y:89,KEY_Z:90,LeftWinKey:91,RightWinKey:92,ContextMenu:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_SEPARATOR:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NumLock:144,ScrollLock:145,US_SEMICOLON:186,US_EQUAL:187,US_COMMA:188,US_MINUS:189,US_DOT:190,US_SLASH:191,US_BACKTICK:192,ABNT_C1:193,ABNT_C2:194,US_OPEN_SQUARE_BRACKET:219,US_BACKSLASH:220,US_CLOSE_SQUARE_BRACKET:221,US_QUOTE:222,OEM_8:223,OEM_102:226,KEY_IN_COMPOSITION:229},Fe=navigator.userAgent.indexOf("Macintosh")>-1,Ke=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Le=navigator.userAgent.toLowerCase().indexOf("AppleWebKit")>-1;Ke?(Ue.US_SEMICOLON=59,Ue.US_EQUAL=107,Ue.US_MINUS=109,Fe&&(Ue.Meta=224)):Le&&(Ue.Meta=91,Ue.Meta=Fe?93:92);var Ye=new(function(){function e(){u()(this,e),this._keyCodeToStr=[],this._strToKeyCode={}}return h()(e,[{key:"define",value:function(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}},{key:"keyCodeToStr",value:function(e){return this._keyCodeToStr[e]}},{key:"strToKeyCode",value:function(e){return this._strToKeyCode[e.toLowerCase()]||Ue.Unknown}}]),e}());function Ve(e){return Ye.keyCodeToStr(e)}Ye.define(Ue.Unknown,"unknown"),Ye.define(Ue.Backspace,"Backspace"),Ye.define(Ue.Tab,"Tab"),Ye.define(Ue.Enter,"Enter"),Ye.define(Ue.Shift,"Shift"),Ye.define(Ue.Ctrl,"Ctrl"),Ye.define(Ue.Alt,"Alt"),Ye.define(Ue.PauseBreak,"PauseBreak"),Ye.define(Ue.CapsLock,"CapsLock"),Ye.define(Ue.Escape,"Escape"),Ye.define(Ue.Space,"Space"),Ye.define(Ue.PageUp,"PageUp"),Ye.define(Ue.PageDown,"PageDown"),Ye.define(Ue.End,"End"),Ye.define(Ue.Home,"Home"),Ye.define(Ue.LeftArrow,"LeftArrow","Left"),Ye.define(Ue.UpArrow,"UpArrow","Up"),Ye.define(Ue.RightArrow,"RightArrow","Right"),Ye.define(Ue.DownArrow,"DownArrow","Down"),Ye.define(Ue.Insert,"Insert"),Ye.define(Ue.Delete,"Delete"),Ye.define(Ue.KEY_0,"0"),Ye.define(Ue.KEY_1,"1"),Ye.define(Ue.KEY_2,"2"),Ye.define(Ue.KEY_3,"3"),Ye.define(Ue.KEY_4,"4"),Ye.define(Ue.KEY_5,"5"),Ye.define(Ue.KEY_6,"6"),Ye.define(Ue.KEY_7,"7"),Ye.define(Ue.KEY_8,"8"),Ye.define(Ue.KEY_9,"9"),Ye.define(Ue.KEY_A,"A"),Ye.define(Ue.KEY_B,"B"),Ye.define(Ue.KEY_C,"C"),Ye.define(Ue.KEY_D,"D"),Ye.define(Ue.KEY_E,"E"),Ye.define(Ue.KEY_F,"F"),Ye.define(Ue.KEY_G,"G"),Ye.define(Ue.KEY_H,"H"),Ye.define(Ue.KEY_I,"I"),Ye.define(Ue.KEY_J,"J"),Ye.define(Ue.KEY_K,"K"),Ye.define(Ue.KEY_L,"L"),Ye.define(Ue.KEY_M,"M"),Ye.define(Ue.KEY_N,"N"),Ye.define(Ue.KEY_O,"O"),Ye.define(Ue.KEY_P,"P"),Ye.define(Ue.KEY_Q,"Q"),Ye.define(Ue.KEY_R,"R"),Ye.define(Ue.KEY_S,"S"),Ye.define(Ue.KEY_T,"T"),Ye.define(Ue.KEY_U,"U"),Ye.define(Ue.KEY_V,"V"),Ye.define(Ue.KEY_W,"W"),Ye.define(Ue.KEY_X,"X"),Ye.define(Ue.KEY_Y,"Y"),Ye.define(Ue.KEY_Z,"Z"),Ye.define(Ue.Meta,"Meta"),Ye.define(Ue.ContextMenu,"ContextMenu"),Ye.define(Ue.F1,"F1"),Ye.define(Ue.F2,"F2"),Ye.define(Ue.F3,"F3"),Ye.define(Ue.F4,"F4"),Ye.define(Ue.F5,"F5"),Ye.define(Ue.F6,"F6"),Ye.define(Ue.F7,"F7"),Ye.define(Ue.F8,"F8"),Ye.define(Ue.F9,"F9"),Ye.define(Ue.F10,"F10"),Ye.define(Ue.F11,"F11"),Ye.define(Ue.F12,"F12"),Ye.define(Ue.F13,"F13"),Ye.define(Ue.F14,"F14"),Ye.define(Ue.F15,"F15"),Ye.define(Ue.F16,"F16"),Ye.define(Ue.F17,"F17"),Ye.define(Ue.F18,"F18"),Ye.define(Ue.F19,"F19"),Ye.define(Ue.NumLock,"NumLock"),Ye.define(Ue.ScrollLock,"ScrollLock"),Ye.define(Ue.US_SEMICOLON,";",";","OEM_1"),Ye.define(Ue.US_EQUAL,"=","=","OEM_PLUS"),Ye.define(Ue.US_COMMA,",",",","OEM_COMMA"),Ye.define(Ue.US_MINUS,"-","-","OEM_MINUS"),Ye.define(Ue.US_DOT,".",".","OEM_PERIOD"),Ye.define(Ue.US_SLASH,"/","/","OEM_2"),Ye.define(Ue.US_BACKTICK,"`","`","OEM_3"),Ye.define(Ue.ABNT_C1,"ABNT_C1"),Ye.define(Ue.ABNT_C2,"ABNT_C2"),Ye.define(Ue.US_OPEN_SQUARE_BRACKET,"[","[","OEM_4"),Ye.define(Ue.US_BACKSLASH,"\\","\\","OEM_5"),Ye.define(Ue.US_CLOSE_SQUARE_BRACKET,"]","]","OEM_6"),Ye.define(Ue.US_QUOTE,"'","'","OEM_7"),Ye.define(Ue.OEM_8,"OEM_8"),Ye.define(Ue.OEM_102,"OEM_102"),Ye.define(Ue.NUMPAD_0,"NumPad0"),Ye.define(Ue.NUMPAD_1,"NumPad1"),Ye.define(Ue.NUMPAD_2,"NumPad2"),Ye.define(Ue.NUMPAD_3,"NumPad3"),Ye.define(Ue.NUMPAD_4,"NumPad4"),Ye.define(Ue.NUMPAD_5,"NumPad5"),Ye.define(Ue.NUMPAD_6,"NumPad6"),Ye.define(Ue.NUMPAD_7,"NumPad7"),Ye.define(Ue.NUMPAD_8,"NumPad8"),Ye.define(Ue.NUMPAD_9,"NumPad9"),Ye.define(Ue.NUMPAD_MULTIPLY,"NumPad_Multiply"),Ye.define(Ue.NUMPAD_ADD,"NumPad_Add"),Ye.define(Ue.NUMPAD_SEPARATOR,"NumPad_Separator"),Ye.define(Ue.NUMPAD_SUBTRACT,"NumPad_Subtract"),Ye.define(Ue.NUMPAD_DECIMAL,"NumPad_Decimal"),Ye.define(Ue.NUMPAD_DIVIDE,"NumPad_Divide");var De=[{key:"O",command:"renderer.setActiveCameraType",args:2},{key:"P",command:"renderer.setActiveCameraType",args:1},{key:"M",command:"renderer.setViewType",args:"mesh"},{key:"W",command:"renderer.setViewType",args:"wireframe"},{key:"Ctrl+O",command:"open"},{key:"Ctrl+Shift+O",command:"openUrl"}];function Be(e){var t=function(e){e.preventDefault();var t=e.keyCode,n=e.ctrlKey,r=e.shiftKey,a=e.altKey,i=e.metaKey,o=[];n&&o.push(Ve(Ue.Ctrl)),r&&o.push(Ve(Ue.Shift)),a&&o.push(Ve(Ue.Alt)),i&&o.push(Ve(Ue.Meta)),o.push(Ve(t)),o=o.join("+");for(var s=De.length-1;s>=0;s--){var l=De[s];if(l.key===o){var c=Te.getCommand(l.command),u=l.args;c&&c(u)}}};return Object(r.useEffect)((function(){var n=e.target||window;return n.addEventListener("keydown",t),function(){return n.removeEventListener("keydown",t)}})),a.a.createElement(a.a.Fragment,null,e.children)}n(42);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ie=function(e){function t(e){var n;return u()(this,t),(n=m()(this,v()(t).call(this,e))).state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({gltf:null,selectedNode:void 0,showFPS:!1,activeCameraType:R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA,viewType:"mesh",hideFileReader:!1},n.calculateLayout()),n.handleDropOver=n.handleDropOver.bind(g()(n)),n.handleDrop=n.handleDrop.bind(g()(n)),n.handleWinResize=function(e,t,n){var r,a;function i(t,n){t&&n&&(a=e.apply(t,n)),r=null}function o(){r&&clearTimeout(r);for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];if(n){var c=null===r;c&&(a=e.apply(this,s)),r=setTimeout(i,t)}else r=setTimeout(i,t,this,s);return a}return o.cancel=function(){clearTimeout(r),r=null},o}(n.handleWinResize,100).bind(g()(n)),n.renderGltf=n.renderGltf.bind(g()(n)),n.setSelectedNode=n.setSelectedNode.bind(g()(n)),n.changeNodeViewerHeight=n.changeNodeViewerHeight.bind(g()(n)),n.changeSideBarWidth=n.changeSideBarWidth.bind(g()(n)),n.setViewType=n.setViewType.bind(g()(n)),n.setActiveCameraType=n.setActiveCameraType.bind(g()(n)),n.open=n.open.bind(g()(n)),n.openUrl=n.openUrl.bind(g()(n)),n.stats=a.a.createRef(),n.gltfLoaderRef=a.a.createRef(),n.rendererRef=a.a.createRef(),n}return C()(t,e),h()(t,[{key:"renderGltf",value:function(e){e&&this.setState({gltf:e,selectedNode:void 0,hideFileReader:!0,activeCameraType:R.constants.OBJECT_TYPE_PERSPECTIVE_CAMERA,viewType:"mesh"})}},{key:"handleDropOver",value:function(e){e.preventDefault()}},{key:"handleDrop",value:function(e){e.preventDefault();var t=this.gltfLoaderRef.current;t&&t.loadGltfFromFiles(e.dataTransfer.files).then(this.renderGltf)}},{key:"setViewType",value:function(e){var t=this.rendererRef.current;t&&(t.setViewType(e),this.setState({viewType:e}))}},{key:"setActiveCameraType",value:function(e){var t=this.rendererRef.current;t&&(t.setActiveCameraType(e),this.setState({activeCameraType:e}))}},{key:"open",value:function(){var e=this.gltfLoaderRef.current;e&&e.open().then(this.renderGltf,(function(){}))}},{key:"openUrl",value:function(){var e=this.gltfLoaderRef.current;e&&e.openUrl().then(this.renderGltf,(function(){}))}},{key:"setSelectedNode",value:function(e){this.setState({selectedNode:e})}},{key:"changeSideBarWidth",value:function(e){var t=e.deltaSize,n=this.state.sideBarLayout.width+t;this.setState(this.calculateLayout({sideBarWidth:n}))}},{key:"changeNodeViewerHeight",value:function(e){var t=e.deltaSize,n=this.state.nodeViewerLayout.height+t;this.setState(this.calculateLayout({nodeViewerHeight:n}))}},{key:"handleWinResize",value:function(){var e=this.state.sideBarLayout.width,t=this.state.nodeViewerLayout.height;this.setState(this.calculateLayout({sideBarWidth:e,nodeViewerHeight:t}))}},{key:"calculateLayout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.topBarHeight,n=void 0===t?30:t,r=e.statusBarHeight,a=void 0===r?20:r,i=e.sideBarWidth,o=void 0===i?240:i,s=e.nodeViewerHeight,l=void 0===s?560:s,c=window.innerWidth,u=window.innerHeight;return{sideBarLayout:{width:o},rendererLayout:{width:c-o,height:u-n-a},nodeViewerLayout:{height:l},nodePropertyViewerLayout:{height:u-n-a-l}}}},{key:"disableContextMenu",value:function(e){e.preventDefault()}},{key:"componentDidMount",value:function(){location.search.indexOf("showFPS=true")>=0&&this.setState({showFPS:!0}),window.addEventListener("resize",this.handleWinResize),window.addEventListener("contextmenu",this.disableContextMenu),Te.registerCommand("renderer.setActiveCameraType",this.setActiveCameraType),Te.registerCommand("renderer.setViewType",this.setViewType),Te.registerCommand("open",this.open),Te.registerCommand("openUrl",this.openUrl)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWinResize),window.removeEventListener("contextmenu",this.disableContextMenu),Te.unregisterCommand("renderer.setActiveCameraType"),Te.unregisterCommand("renderer.setViewType"),Te.unregisterCommand("open"),Te.unregisterCommand("openUrl")}},{key:"componentDidUpdate",value:function(){console.log("update")}},{key:"render",value:function(){var e=this,t=this.state,n=t.gltf,r=t.selectedNode;return a.a.createElement(Be,null,a.a.createElement(w,{vertical:!0},a.a.createElement(A,null,a.a.createElement(Re,{activeCameraType:t.activeCameraType,viewType:t.viewType})),a.a.createElement(A,{flexGrow:1},a.a.createElement(w,null,a.a.createElement(A,{width:t.sideBarLayout.width},a.a.createElement(Oe,{resizeX:!0,onResize:this.changeSideBarWidth},a.a.createElement(w,{vertical:!0},a.a.createElement(A,null,a.a.createElement(Oe,{resizeY:!0,onResize:this.changeNodeViewerHeight},a.a.createElement(se,{height:t.nodeViewerLayout.height,gltf:t.gltf,onSelectNode:this.setSelectedNode,selectedNode:r}))),a.a.createElement(A,{flexGrow:1},a.a.createElement(he,{gltf:t.gltf,selectedNode:r,height:t.nodePropertyViewerLayout.height}))))),a.a.createElement(A,{flexGrow:1},a.a.createElement("div",{onDrop:this.handleDrop,onDragOver:this.handleDropOver},t.showFPS&&a.a.createElement(Ee,{ref:this.stats,right:5,top:36}),a.a.createElement($,{ref:this.gltfLoaderRef,onSuccess:this.renderGltf,hide:this.state.hideFileReader}),a.a.createElement(ee,{ref:this.rendererRef,gltf:t.gltf,selectedNode:t.selectedNode,hide:this.state.hideGltfRenderer,beforeRender:t.showFPS&&function(){return e.stats.current.begin()},afterRender:t.showFPS&&function(){return e.stats.current.end()},width:t.rendererLayout.width,height:t.rendererLayout.height,activeCameraType:t.activeCameraType,viewType:t.viewType}))))),a.a.createElement(A,null,a.a.createElement(Se,{gltf:n}))))}}]),t}(a.a.Component);o.a.render(a.a.createElement(Ie,null),document.getElementById("root"))}]);